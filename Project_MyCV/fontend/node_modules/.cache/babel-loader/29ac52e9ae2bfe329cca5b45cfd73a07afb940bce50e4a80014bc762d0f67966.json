{"ast":null,"code":"import classNames from\"classnames/bind\";import{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import styles from\"./Home.module.scss\";import Input from\"../../../components/Input\";import Button from\"../../../components/Button\";import{updateStatusMessage,deleteEmail,replyGmail}from\"../../../Services/message\";import Notification from\"../../../components/Notification\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const cx=classNames.bind(styles);function Message(_ref){let{item,callAPi}=_ref;const[display,setDisplay]=useState(false);const[reply,setReply]=useState(\"\");const navigate=useNavigate();const handleDisplay=()=>{setDisplay(!display);};const handleLogId=id=>{try{updateStatusMessage(id);}catch(error){console.log(error);}};const handleRemoteEmail=async id=>{try{const result=await deleteEmail(id);Notification(result.data.message,\"success\");if(result.status===403){Notification(result.data.message,\"warning\");navigate(\"/login\");}else{callAPi();};}catch(error){console.log(error);Notification(\"The system is maintenance\",\"error\");}};const handleReplyEmail=async id=>{try{const result=await replyGmail({\"ReplyMessage\":reply},id);if(result.Status>=404){Notification(result.data.message,\"warning\");}else if(result.status===403){Notification(result.data.message,\"warning\");navigate(\"/login\");}else{Notification(result.data.message,\"success\");setReply(\"\");callAPi();}}catch(error){Notification(\"The system is maintenance\",\"error\");console.log(error);}};return/*#__PURE__*/_jsxs(\"section\",{className:cx(\"message\"),id:item._id,onClick:()=>handleLogId(item._id),children:[/*#__PURE__*/_jsxs(\"article\",{className:cx(\"title\"),onClick:handleDisplay,style:{color:item.Status===0?\"#fdfeff\":\"\"},children:[/*#__PURE__*/_jsx(\"p\",{className:cx(\"nameTitle\"),children:item.NameUserReceiver}),/*#__PURE__*/_jsx(\"h1\",{className:cx(\"titleMessage\"),children:item.TitleMessage}),/*#__PURE__*/_jsx(\"i\",{className:cx(\"bi bi-trash3\",\"remote\"),onClick:()=>handleRemoteEmail(item._id)})]}),/*#__PURE__*/_jsxs(\"section\",{className:cx(\"container\"),style:{display:display?\"block\":\"none\"},children:[/*#__PURE__*/_jsx(\"article\",{className:cx(\"itemTilteMessage\"),children:/*#__PURE__*/_jsx(\"h1\",{children:item.TitleMessage})}),/*#__PURE__*/_jsxs(\"article\",{className:cx(\"itemAccountReceiver\"),children:[/*#__PURE__*/_jsx(\"span\",{children:item.NameUserReceiver}),/*#__PURE__*/_jsx(\"p\",{children:item.EmailReceiver})]}),/*#__PURE__*/_jsx(\"article\",{className:cx(\"itemContentMessage\"),children:/*#__PURE__*/_jsx(\"p\",{children:item.Content})}),/*#__PURE__*/_jsx(\"article\",{className:cx(\"itemReplyMessage\"),children:/*#__PURE__*/_jsx(\"p\",{children:item.ReplyMessage})}),/*#__PURE__*/_jsxs(\"article\",{className:cx(\"itemButtonReplyMessage\"),children:[/*#__PURE__*/_jsx(Input,{name:\"Reply The Message\",type:\"text\",required:true,value:reply,onFocus:()=>{},id:\"itemReplyMessage-\".concat(item._id),onChange:e=>setReply(e.target.value)}),/*#__PURE__*/_jsx(Button,{name:\"Send Message\",width:\"15%\",height:\"10%\",padding:\"1%\",onClick:()=>handleReplyEmail(item._id)})]})]})]});}export default Message;","map":{"version":3,"names":["classNames","useState","useNavigate","styles","Input","Button","updateStatusMessage","deleteEmail","replyGmail","Notification","jsx","_jsx","jsxs","_jsxs","cx","bind","Message","_ref","item","callAPi","display","setDisplay","reply","setReply","navigate","handleDisplay","handleLogId","id","error","console","log","handleRemoteEmail","result","data","message","status","handleReplyEmail","Status","className","_id","onClick","children","style","color","NameUserReceiver","TitleMessage","EmailReceiver","Content","ReplyMessage","name","type","required","value","onFocus","concat","onChange","e","target","width","height","padding"],"sources":["D:/FPT Polytechnic/ListProject/projectCV/Project_MyCV/fontend/src/pages/admin/Home/Message.js"],"sourcesContent":["import classNames from \"classnames/bind\";\r\nimport { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport styles from \"./Home.module.scss\";\r\nimport Input from \"../../../components/Input\";\r\nimport Button from \"../../../components/Button\";\r\nimport { updateStatusMessage, deleteEmail, replyGmail } from \"../../../Services/message\";\r\nimport Notification from \"../../../components/Notification\";\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction Message({item, callAPi}) {\r\n\r\n    const [display, setDisplay] = useState(false);\r\n    const [reply, setReply] = useState(\"\");\r\n    const navigate = useNavigate();\r\n\r\n    const handleDisplay = () => {\r\n        setDisplay(!display);\r\n    };\r\n\r\n    const handleLogId = (id) => {\r\n        try {\r\n            updateStatusMessage(id);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    };\r\n    const handleRemoteEmail = async (id) => {\r\n        try {\r\n            const result = await deleteEmail(id);\r\n            Notification(result.data.message, \"success\");\r\n            if(result.status === 403){\r\n                Notification(result.data.message, \"warning\");   \r\n                navigate(\"/login\");\r\n            }else{\r\n                callAPi();\r\n            };            \r\n        } catch (error) {\r\n            console.log(error);\r\n            Notification(\"The system is maintenance\", \"error\");\r\n        }\r\n    };\r\n\r\n\r\n    const handleReplyEmail = async (id) =>{\r\n        try {\r\n            const result = await replyGmail({\"ReplyMessage\": reply}, id);   \r\n            if(result.Status >= 404){\r\n                Notification(result.data.message, \"warning\");\r\n            }\r\n            else if(result.status === 403){\r\n\r\n                Notification(result.data.message, \"warning\");     \r\n                navigate(\"/login\");\r\n            }\r\n            else{\r\n                Notification(result.data.message, \"success\");\r\n                setReply(\"\");\r\n                callAPi();\r\n            }\r\n        } catch (error) {\r\n            Notification(\"The system is maintenance\", \"error\");            \r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    return ( \r\n        <section className={cx(\"message\")}  id={item._id} onClick={() => handleLogId(item._id)}>\r\n            <article className={cx(\"title\")} onClick={handleDisplay} \r\n                style={{color: item.Status === 0 ? \"#fdfeff\" : \"\"}}>\r\n                <p className={cx(\"nameTitle\")}>{item.NameUserReceiver}</p>\r\n                <h1 className={cx(\"titleMessage\")}>{item.TitleMessage}</h1>\r\n                <i className={cx(\"bi bi-trash3\", \"remote\")} onClick={() => handleRemoteEmail(item._id)}></i>\r\n            </article>\r\n            <section\r\n                className={cx(\"container\")}\r\n                style={{ display: display ? \"block\" : \"none\" }}\r\n            >\r\n                <article className={cx(\"itemTilteMessage\")}>\r\n                    <h1>{item.TitleMessage}</h1>\r\n                </article>\r\n                <article className={cx(\"itemAccountReceiver\")}>\r\n                    <span>{item.NameUserReceiver}</span>\r\n                    <p>{item.EmailReceiver}</p>\r\n                </article>\r\n                <article className={cx(\"itemContentMessage\")}>\r\n                    <p>{item.Content}</p>\r\n                </article>\r\n                <article className={cx(\"itemReplyMessage\")}>\r\n                    <p>{item.ReplyMessage}</p>   \r\n                </article>\r\n                <article  className={cx(\"itemButtonReplyMessage\")}>\r\n                    <Input\r\n                        name=\"Reply The Message\"\r\n                        type=\"text\"\r\n                        required\r\n                        value={reply}\r\n                        onFocus={() => {}}\r\n                        id={`itemReplyMessage-${item._id}`}\r\n                        onChange={(e) => setReply(e.target.value)}\r\n                    />\r\n                    <Button\r\n                        name=\"Send Message\"\r\n                        width=\"15%\"\r\n                        height=\"10%\"\r\n                        padding=\"1%\"\r\n                        onClick={() => handleReplyEmail(item._id)}\r\n                    />\r\n                </article>\r\n            </section>\r\n        </section>        \r\n    );\r\n}\r\n\r\nexport default Message;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}