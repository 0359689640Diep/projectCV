{"ast":null,"code":"import classNames from\"classnames/bind\";import styles from\"../project.module.scss\";import Input from'./../../../../components/Input/index';import UploadImage from\"../../../../components/UploadImage\";import{useState}from\"react\";import More from\"../../../../components/More\";import Button from\"../../../../components/Button\";import{updateProject,deleteProject}from\"../../../../Services/project\";import Notification from\"../../../../components/Notification\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const cx=classNames.bind(styles);function Update(_ref){let{data,callAPI}=_ref;const[Name,SetName]=useState(data.Name);const[Introduce,SetIntroduce]=useState(data.Introduce);const[LinkProject,SetLinkProject]=useState(data.LinkProject);const[Image,SetImage]=useState(data.Image);const[Author,SetAuthor]=useState(data.Author);const[Technology,SetTechnology]=useState(data.Technology);const[Task,SetTask]=useState(data.Task);const[ObjectInProject,SetObjectInProject]=useState(data.ObjectInProject);const navigate=useNavigate();const handleUpdateProjet=async id=>{const formData=new FormData();formData.append(\"Name\",Name);formData.append(\"Introduce\",Introduce);formData.append(\"LinkProject\",LinkProject);formData.append(\"Author\",Author);formData.append(\"Technology\",Technology);formData.append(\"Task\",Task);formData.append(\"ObjectInProject\",ObjectInProject);// Lặp qua từng phần tử trong object Image\nfor(const key in Image){if(Object.hasOwnProperty.call(Image,key)){const file=Image[key];formData.append(\"Image\",file);}}const result=await updateProject(formData,id);if(result.status>=400){Notification(result.data.message,\"warning\");}else if(result.status===403){Notification(result.data.message,\"warning\");navigate(\"/login\");}else{Notification(result.data.message,\"success\");callAPI();};};const handleDelete=async id=>{try{const result=await deleteProject(id);Notification(result.data.message,\"success\");if(result.status===403){Notification(result.data.message,\"warning\");navigate(\"/login\");}else{callAPI();}}catch(error){console.log(error);Notification(\"The system is maintenance\",\"error\");}};return/*#__PURE__*/_jsxs(\"section\",{className:cx(\"content\"),children:[/*#__PURE__*/_jsx(Input,{name:\"Name\",type:\"text\",id:\"Name\",value:Name,onChange:e=>SetName(e.target.value)}),/*#__PURE__*/_jsx(Input,{name:\"Introduce\",type:\"text\",id:\"Introduce\",value:Introduce,onChange:e=>SetIntroduce(e.target.value)}),/*#__PURE__*/_jsx(Input,{name:\"Link Project\",type:\"text\",id:\"LinkProject\",value:LinkProject,onChange:e=>SetLinkProject(e.target.value)}),/*#__PURE__*/_jsx(UploadImage,{name:\"Image\",id:\"Image\",required:true,multiple:true,Item:data.Image,value:\"1\",onImageChange:SetImage}),/*#__PURE__*/_jsx(More,{name:\"Author\",id:\"Author\",type:\"text\",value:Author,dataOnMore:SetAuthor}),/*#__PURE__*/_jsx(More,{name:\"Task\",id:\"Task\",type:\"text\",value:Task,dataOnMore:SetTask}),/*#__PURE__*/_jsx(More,{name:\"Technology\",id:\"Technology\",type:\"text\",value:Technology,dataOnMore:SetTechnology}),/*#__PURE__*/_jsx(More,{name:\"Object In Project\",id:\"ObjectInProject\",type:\"text\",value:ObjectInProject,dataOnMore:SetObjectInProject}),/*#__PURE__*/_jsx(Button,{name:\"Update Project\",width:\"150px\",height:\"40px\",onClick:()=>{handleUpdateProjet(data._id);}}),/*#__PURE__*/_jsx(Button,{name:\"Delete Project\",width:\"150px\",height:\"40px\",margin:\"0 2%\",onClick:()=>{handleDelete(data._id);}})]});}export default Update;","map":{"version":3,"names":["classNames","styles","Input","UploadImage","useState","More","Button","updateProject","deleteProject","Notification","useNavigate","jsx","_jsx","jsxs","_jsxs","cx","bind","Update","_ref","data","callAPI","Name","SetName","Introduce","SetIntroduce","LinkProject","SetLinkProject","Image","SetImage","Author","SetAuthor","Technology","SetTechnology","Task","SetTask","ObjectInProject","SetObjectInProject","navigate","handleUpdateProjet","id","formData","FormData","append","key","Object","hasOwnProperty","call","file","result","status","message","handleDelete","error","console","log","className","children","name","type","value","onChange","e","target","required","multiple","Item","onImageChange","dataOnMore","width","height","onClick","_id","margin"],"sources":["D:/FPT Polytechnic/ListProject/projectCV/Project_MyCV/fontend/src/pages/admin/project/Update/index.js"],"sourcesContent":["import classNames from \"classnames/bind\";\r\n\r\nimport styles from \"../project.module.scss\";\r\nimport Input from './../../../../components/Input/index';\r\nimport UploadImage from \"../../../../components/UploadImage\";\r\nimport { useState } from \"react\";\r\nimport More from \"../../../../components/More\";\r\nimport Button from \"../../../../components/Button\";\r\nimport { updateProject, deleteProject } from \"../../../../Services/project\";\r\nimport Notification from \"../../../../components/Notification\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction Update({data, callAPI}){\r\n\r\n    const [Name, SetName] = useState(data.Name);\r\n    const [Introduce, SetIntroduce] = useState(data.Introduce);\r\n    const [LinkProject, SetLinkProject] = useState(data.LinkProject);\r\n    const [Image, SetImage] = useState(data.Image);\r\n    const [Author, SetAuthor] = useState(data.Author);\r\n    const [Technology, SetTechnology] = useState(data.Technology);\r\n    const [Task, SetTask] = useState(data.Task);\r\n    const [ObjectInProject, SetObjectInProject] = useState(data.ObjectInProject);\r\n    const navigate = useNavigate();\r\n\r\n    const handleUpdateProjet = async (id) => {\r\n\r\n        const formData = new FormData();\r\n\r\n        formData.append(\"Name\", Name);\r\n        formData.append(\"Introduce\", Introduce);\r\n        formData.append(\"LinkProject\", LinkProject);\r\n        formData.append(\"Author\", Author);\r\n        formData.append(\"Technology\", Technology);\r\n        formData.append(\"Task\", Task);\r\n        formData.append(\"ObjectInProject\", ObjectInProject);\r\n\r\n\r\n        // Lặp qua từng phần tử trong object Image\r\n        for (const key in Image) {\r\n            if (Object.hasOwnProperty.call(Image, key)) {\r\n                const file = Image[key];\r\n                formData.append(\"Image\", file);\r\n            }\r\n        }\r\n\r\n        const result = await updateProject(formData, id);\r\n        if(result.status >= 400){\r\n            Notification(result.data.message, \"warning\");\r\n        }else if(result.status === 403){\r\n\r\n                Notification(result.data.message, \"warning\");     \r\n                navigate(\"/login\");\r\n        }\r\n        else{\r\n            Notification(result.data.message, \"success\");\r\n            \r\n            callAPI();\r\n        };\r\n    }\r\n\r\n    const handleDelete = async (id) => {\r\n        try {\r\n            const result = await deleteProject(id);\r\n            Notification(result.data.message, \"success\");\r\n            if(result.status === 403){\r\n                Notification(result.data.message, \"warning\");   \r\n                navigate(\"/login\");\r\n            }else{\r\n                callAPI();\r\n            }           \r\n        } catch (error) {\r\n            console.log(error);\r\n            Notification(\"The system is maintenance\", \"error\");\r\n        }\r\n    }\r\n\r\n    return (\r\n        <section className={cx(\"content\")}>\r\n            <Input\r\n                name=\"Name\"\r\n                type=\"text\"\r\n                id=\"Name\"\r\n                value={Name}\r\n                onChange={(e) => (SetName(e.target.value))}\r\n            />\r\n            <Input\r\n                name=\"Introduce\"\r\n                type=\"text\"\r\n                id=\"Introduce\"\r\n                value={Introduce}\r\n                onChange={(e) => (SetIntroduce(e.target.value))}\r\n            />\r\n            <Input\r\n                name=\"Link Project\"\r\n                type=\"text\"\r\n                id=\"LinkProject\"\r\n                value={LinkProject}\r\n                onChange={(e) => (SetLinkProject(e.target.value))}\r\n            />\r\n            <UploadImage\r\n                name=\"Image\"\r\n                id=\"Image\"\r\n                required={true}\r\n                multiple={true}\r\n                Item={data.Image}\r\n                value='1'\r\n                onImageChange={SetImage}\r\n            />\r\n            <More\r\n                name=\"Author\"\r\n                id=\"Author\"\r\n                type=\"text\"\r\n                value={Author}\r\n                dataOnMore={SetAuthor}\r\n            />\r\n            <More\r\n                name=\"Task\"\r\n                id=\"Task\"\r\n                type=\"text\"\r\n                value={Task}\r\n                dataOnMore={SetTask}\r\n            />\r\n            <More\r\n                name=\"Technology\"\r\n                id=\"Technology\"\r\n                type=\"text\"\r\n                value={Technology}\r\n                dataOnMore={SetTechnology}\r\n            />\r\n            <More\r\n                name=\"Object In Project\"\r\n                id=\"ObjectInProject\"\r\n                type=\"text\"\r\n                value={ObjectInProject}\r\n                dataOnMore={SetObjectInProject}\r\n            />\r\n            <Button\r\n                name=\"Update Project\"\r\n                width = \"150px\"\r\n                height = \"40px\"\r\n                onClick={() => {handleUpdateProjet(data._id)}}\r\n            />\r\n            <Button\r\n                name=\"Delete Project\"\r\n                width = \"150px\"\r\n                height = \"40px\"\r\n                margin = \"0 2%\"\r\n                onClick={() => {handleDelete(data._id)}}\r\n            />\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default Update;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}